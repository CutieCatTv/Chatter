package com.voxldavid.chatter;

import java.util.Scanner;
import java.util.Arrays;

class ClientInterface implements Interface {
    ChatClient client;
    Scanner    scanner;

    public ClientInterface() {
        client   = new ChatClient(this);
        scanner  = new Scanner(System.in);
    }

    public void run() {
        String text    = scanner.nextLine();
        String[] words = text.split(" ");
        while (!words[0].equals("quit")) {
            if (words[0].equals("login")) {
                client.login(words[1], words[2]);
            } else if (words[0].equals("msg")) {
                String msg = String.join(" ", Arrays.copyOfRange(words, 1, words.length - 1));
                client.sendMessage(msg);
            } else if (words[0].equals("logout")) {
                client.send("logout");
            }
        }
    }

    @Override
    public void requestLogin() {
        System.out.println("Please login first");
    }

    @Override
    public void alreadyLoggedIn(String roomName) {
        System.out.print("Already logged in into room: '" + roomName + "'");
    }
}